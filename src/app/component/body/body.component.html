<app-carousel></app-carousel>

<div class="container mb-5">

  <!-- Début code de la search barre -->
  <div class="search">
    <!-- Début import du composant searchbar -->
    <app-searchbar (searchChange)="onSearchChange($event)"></app-searchbar>
    <!-- Fin import du composant searchbar -->
    <div class="col-12 m-3">
      <div class="alert alert-danger m-4 text-center"
        *ngIf="establishment &&(establishment | filter:filter).length === 0">
        <h3>No establishment found <span *ngIf="filter"> with search "{{filter}}"</span></h3>
      </div>
    </div>
    <!-- Fin code search barre -->

    <div *ngIf="user; then thenBlock else elseBlock"></div>

    <ng-template #thenBlock>


      <!-- Début import composant card-list -->
      <app-card-list [establishments]="establishment" [type]="'Bar'" [filter]="filter">
        Bars
      </app-card-list>
      <!-- Fin import composant card-list -->

      <!-- Début import composant card-list -->
      <app-card-list [establishments]="establishment" [type]="'Restaurant'" [filter]="filter">
        Restaurants
      </app-card-list>
      <!-- Fin import composant card-list -->

    </ng-template>

    <ng-template #elseBlock>
      <!-- Début import composant card-list -->
      <app-card-list [establishments]="establishment" [filter]="filter">
          Bars & Restaurants
      </app-card-list>
      <!-- Fin import composant card-list -->

      <input type="checkbox" name="toogle" id="toogle" />
      <div id="volet">
        <p class="titleOpen">Best restaurants of week : </p>
        <ng-container *ngFor="let allEstablishment of establishment | slice:0:1 ">
          <img
            src="{{allEstablishment.medias[0]?.url ? allEstablishment.medias[0].url : 'http://teuge-airport.nl/wp-content/uploads/no_image.jpg'}}"
            class="img-fluid card-img-top p-1" alt="image establishment">
          <p>{{allEstablishment.name}}</p>
        </ng-container>
        <label for="toogle">Open</label>
      </div>

    </ng-template>

  </div>

  <div class="question mb-5 mt-5">
    <h3 class="mb-5 d-flex justify-content-center">How it works ?</h3>
    <div class="container mb-5 mt-5 d-flex">
      <div>
        <img class="icone" src="assets/image/map.png">
      </div>
      <div>
        <img class="icone-1" src="assets/image/reserv.png">
      </div>
      <div>
        <img class="icone-2" src="assets/image/sold.png">
      </div>
    </div>
    <div class="container d-flex">
      <div class="explication">
        <h6>Discover</h6>
        <p>The most popular restaurants.</p>
      </div>
      <div class="explication-1">
        <h6>Book</h6>
        <p>Directly according to your desires.</p>
      </div>
      <div class="explication-2">
        <h6>Benefit</h6>
        <p>Exclusive offers up to -50%.</p>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="col-sm-3">
        <div class="pVert">
          <div class="resaTitle">OpenResa is recruiting!</div>
          <div class="resaRecrute">Join us</div>
        </div>
      </div>
      <div class="col-sm-9">
        <div class="pJaune">
          <div class="resaFidele">Your loyalty rewarded</div>
          <div class="resaProgramme">Discover your loyalty program</div>
        </div>
      </div>
    </div>
  </div>

  <div class="container download mb-5">
    <div>
      <img class="disponible" src="assets/image/appstore1.png">
    </div>
    <div class="app-title">The reservation as never ! </div>
    <div>
      <img class="phone-img" src="assets/image/Capture du 2019-04-23 17-17-27.png">
    </div>
    <div>
      <img class="disponible" src="assets/image/badge_new.png">
    </div>
  </div>